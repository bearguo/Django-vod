{% extends "vodmanagement/basic.html" %}
{% load staticfiles %}

{% block scripts %}
{#    <script src="{% static 'js/hola_player.js'%}"></script>#}
{#    <script>#}
{#        window.hola_player()#}
{#    </script>#}

{% endblock scripts %}

{% block content %}
<div class="container">
   <div class="row">
{% for video in videos %}
   <div class="col-md-6">
       <div class="panel panel-primary">
            <div class="panel-heading">
                <h3>{{ video.title }}</h3>
            </div>
            <div class="panel-body">
               <video id="video{{ video.pk }}"class='video-js vjs-default-skin' width="400" height="400" controls
                preload="auto">
                   <source src="{{ video.video.url }}" type="video/mp4">
               </video>
            </div>
       </div>
    </div>
{% endfor %}
    <div class="col-md-12">
        <div class="pagination">
            <span class="step-links">
                {% if videos.has_previous %}
                    <a href="?page={{ videos.previous_page_number }}">previous</a>
                {% endif %}

                <span class="current">
                    Page {{ videos.number }} of {{ videos.paginator.num_pages }}.
                </span>

                {% if videos.has_next %}
                    <a href="?page={{ videos.next_page_number }}">next</a>
                {% endif %}
            </span>
        </div>
    </div>
</div>
<div class="col-md-12">
<div id="output"></div>
<script type="text/javascript">
(function(){
var video, output;
var scale = 0.8;
var initialize = function() {
    output = document.getElementById("output");
    video = document.getElementById("video11");
    video.addEventListener('loadeddata',captureImage);
};
var captureImage = function() {
    var canvas = document.createElement("canvas");
    canvas.width = video.videoWidth * scale;
    canvas.height = video.videoHeight * scale;
    canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);

    var img = document.createElement("img");
    img.src = canvas.toDataURL("image/png");
    img.width = 400;
    img.height = 300;
    output.appendChild(img);
};
initialize();
})();
</script>

</div>
</div>
{% endblock %}